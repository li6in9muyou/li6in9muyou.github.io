---
title: 棋牌类手机游戏项目反思。Review of the Kingz project
categories: [ProjectExperience]
tags: [review]
mermaid: true
---

本项目是 H5 移动应用开发技术课程的作业，我们计划开发一个双人联机实时对战的棋牌类手机游戏。
我在此项目中负责系统设计和主要编码工作。
我决定用开发面向移动用户的 web 应用，给出了前端组件的功能设计和整体结构设计，并给出了后端 API 接口定义。
经过漫长的开发阶段，我们小组很多成员对我们的最终作品不太满意。我也认为这一项目非常失败。

# 概要

本项目前端的几乎全部代码都由我完成，就编码工作而言，其最大的特点是反反复复的重头开始，当我对目前的实现不满意时总想重新开始重头再来。
此外一个很大的弊端是面向过程编程，除了游戏实体外，我没有对诸过程设计抽象。所使用的开发框架也未有此支持，我甚至认为是裸金属风格的开发。

# 面向过程编程

# 反复重头开始

下面简要列出重头到尾，我做过的失败的开发尝试：

- tk2：2022-04-23 做了 5 个小时，游戏，React，对游戏、棋盘、玩家的兵力、玩家都作了抽象。
- tk3：没有版本控制，React，游戏，对游戏、棋盘、玩家的兵力、玩家、游戏过程作了抽象，写了单元测试，主要是游戏规则和地图生成部分。
- tk4：08-30 到 10-03，Svelte，游戏，采用 Clean Architecture，对游戏逻辑、交互界面、网络模块作了抽象，写了单元测试。
- tk4-explanation：09-01 和 02 两天，Vanilla，注册、游戏、存档，用了事件总线写法、最简陋的图形界面。
- tk5：没有版本控制，Svelte，明显是为了解决 tk4 中太复杂，方法调用太多的问题，缩短了调用链，取消了很多不必要的类、接口等。
- tk6：10-13 不到 1 个小时，Vanilla，手动渲染 HTML 标记语言，引入了事件总线的写法，没有实现任何功能。
- tk7：10-14 到 10-31 ，React，写了其他非游戏内容，玩家注册、云端保存的游戏、等待匹配、游戏，用的是事件总线的写法，写的是井字棋。
- tk8：没有版本控制 ，Backbone，没有实现任何功能，只是为了了解这个框架。
- tk9：1024 和 25 两天 ，Django，除了框架自带的玩家注册功能，实现了两人对弈，创建房间，房间列表等，最简陋的图形界面。

我认为反复重头开始是因为缺少前期的设计，凭感觉编码，一段事件之后才发现捉襟见肘。
编码错误多，添加新的功能困难，出现很多意料不到的错误。但这一个判断，好像也很难从 git 历史中找到依据。

# 使用 git 的习惯不好

对一个 commit message，有很多无关的改动，或者说看不出有的改动怎么就跟这个 commit message 有关。
例如[这个 commit](https://github.com/li6in9muyou/kingz-mobile/commit/9b98951180986466ae129e6d400fedbf75758885)，说是
实现了"prompt enter nickname before game start"，但从 diff 看，这只是把控制游戏生命周期的函数调用
沿移到原调用链下移。没有任何跟用户交互有关的内容。

每一个 commit message 都带一个 label 似乎也不好，因为我还想 commit 很多中间步骤，这些中间步骤单个看其实
没有什么作用
