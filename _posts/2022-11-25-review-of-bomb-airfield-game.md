---
title: 炸飞机场游戏开发反思。Review of bomb airfield game
categories: [ProjectExperience]
tags: [teamwork, c#]
---

本次开发过程最大的特点是各成员的参与度均较高，且充分使用了 git 协助开发。就系统设计和实现而言，我们通过网页接受用户
输入并显示游戏状态，网页与 C# 二进制之间通过 WebSocket 交互。本系统是基于 TCP 协议实现点对点联机的双人对战游戏，
主要由游戏主循环构成。为了简单起见，这一游戏循环是顺序执行并使用阻塞式 IO。即
等待用户的输入、渲染游戏状态、收发 TCP 数据包时整个程序阻塞。

手写纯 JavaScript 通过 WebSocket 和原生二进制沟通是非常困难的，应该基于现有的 RPC 协议栈来实现。

人工智能辅助计算使用的是完全搜索算法，用简单的文本存储了所有的棋盘数据。我用 C# 实现的基于 DFS 的棋盘状态穷举程序速度很慢
，原因尚不明确，怀疑是内存分配太多太频繁。后来用 C++ 实现并输出为文本。示例如下，一共有六万八千多个这样的飞机场上飞机的摆法的记录。

```text
  @    @
**********
  *    *
 ***  ***

     *
     * *
    @***
     * *
     *
```

团队统一的整个代码仓库的代码风格自动整理是非常必要的。
